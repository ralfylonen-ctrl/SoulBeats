<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dark Mood Quiz</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body {
  margin:0; font-family:sans-serif; min-height:100vh; display:flex; justify-content:center; align-items:center;
  background:#111722; color:white; overflow:hidden; transition: background 1s ease;
}
.quiz-container {
  max-width: 700px; text-align:center; padding:30px; border-radius:12px; position:relative; z-index:2; background: rgba(0,0,0,0.6);
}
.fade-in { animation: fadeIn 0.8s ease forwards; }
.fade-out { animation: fadeOut 0.8s ease forwards; }
@keyframes fadeIn { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform:translateY(0); } }
@keyframes fadeOut { from { opacity:1; } to { opacity:0; } }

.option {
  background: rgba(35,49,72,0.8); padding:12px 20px; margin:10px 0; border-radius:12px; cursor:pointer;
  transition: transform 0.3s, background 0.3s;
}
.option:hover {
  transform: scale(1.1);
  background: linear-gradient(270deg, #ff0080, #ff8c00, #40e0d0, #8a2be2, #ff0080);
  background-size: 1000% 1000%;
  animation: rainbow 5s ease infinite;
}
@keyframes rainbow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.background-layer {
  position:absolute; width:200%; height:200%; top:-50%; left:-50%; opacity:0.08; border-radius:50%;
  animation:move 25s linear infinite; z-index:1;
}
@keyframes move { 0%{transform:translate(0,0) rotate(0deg);} 100%{transform:translate(100px,100px) rotate(360deg);} }

</style>
</head>
<body>

<div class="quiz-container" id="quiz">
  <h1 class="text-3xl mb-6">How are you feeling today?</h1>
  <div id="options"></div>
</div>

<script>
const moods = ['happy','sad','angry','lonely','anxious'];
const moodColors = {
  happy:["#ffd700","#fffa65","#ffe066","#fff89a"],
  sad:["#6c5ce7","#a29bfe","#341f97","#74b9ff"],
  angry:["#e74c3c","#ff7675","#c0392b","#ff4d4d"],
  lonely:["#3498db","#74b9ff","#0984e3","#5dade2"],
  anxious:["#1abc9c","#55efc4","#16a085","#48c9b0"]
}

// Função para gerar múltiplas camadas de fundo
function generateBackground(stepKey){
  document.querySelectorAll('.background-layer').forEach(el=>el.remove());
  if(!moodColors[stepKey]) return;
  const colors = moodColors[stepKey];
  for(let i=0;i<10;i++){
    const div = document.createElement('div');
    div.className='background-layer';
    div.style.background=`radial-gradient(circle, ${colors[i%colors.length]} 0%, transparent 70%)`;
    div.style.animationDuration = `${15 + i*2}s`;
    div.style.opacity = 0.05 + 0.05*i;
    document.body.appendChild(div);
  }
}

// Estrutura do quiz (exemplo inicial, depois podemos expandir p/ 20+ perguntas cada humor)
const quizData = {
  start:{ question:"How are you feeling today?", options:moods.map(m=>({text:m.charAt(0).toUpperCase()+m.slice(1), next:m}))},
  happy: { question:"What makes you happy?", options:[{text:"Achievements", next:"happy2"},{text:"Friends", next:"happy2"},{text:"Hobbies", next:"happy2"}]},
  happy2: { question:"Do you share your happiness?", options:[{text:"Yes", next:"happy3"},{text:"No", next:"happy3"}]},
  happy3: { question:"Do you celebrate small wins?", options:[{text:"Always", next:"happy4"},{text:"Sometimes", next:"happy4"}]},
  happy4: { advice:"Keep embracing joy! Share your happiness and enjoy every moment 🌞"},

  sad: { question:"Why are you sad?", options:[{text:"Work/School", next:"sad2"},{text:"Relationships", next:"sad2"}]},
  sad2: { question:"Do you talk to someone?", options:[{text:"Yes", next:"sad3"},{text:"No", next:"sad3"}]},
  sad3: { advice:"Take small steps: talk to someone, write your feelings, rest, and be kind to yourself 🌧️"},

  angry: { question:"What made you angry?", options:[{text:"Someone", next:"angry2"},{text:"Something else", next:"angry2"}]},
  angry2: { advice:"Release anger safely: breathe, move your body, write down feelings 💥"},

  lonely: { question:"Why do you feel lonely?", options:[{text:"No friends", next:"lonely2"},{text:"Feeling misunderstood", next:"lonely2"}]},
  lonely2: { advice:"Connect with someone: call a friend, join communities, engage in hobbies 🤝"},

  anxious: { question:"What is causing your anxiety?", options:[{text:"Work/School", next:"anxious2"},{text:"Relationships", next:"anxious2"}]},
  anxious2: { advice:"Calm your mind: meditate, breathe deeply, focus on controllable things 🌿"}
};

// Lógica do quiz
const quizContainer = document.getElementById("quiz");
let optionsDiv = document.getElementById("options");

function showStep(stepKey){
  const step = quizData[stepKey];
  generateBackground(stepKey);
  optionsDiv.innerHTML='';
  quizContainer.classList.remove("fade-in");
  quizContainer.classList.add("fade-out");

  setTimeout(()=>{
    quizContainer.classList.remove("fade-out");
    quizContainer.classList.add("fade-in");

    if(step.advice){
      quizContainer.innerHTML=`<h1 class="text-3xl mb-6">Advice for you:</h1>
                               <p class="text-xl">${step.advice}</p>`;
      return;
    }

    quizContainer.innerHTML=`<h1 class="text-3xl mb-6">${step.question}</h1>`;
    optionsDiv = document.createElement("div");
    optionsDiv.id="options";
    quizContainer.appendChild(optionsDiv);

    step.options.forEach(opt=>{
      const btn = document.createElement("div");
      btn.className="option";
      btn.innerText=opt.text;
      btn.onmouseenter = ()=> btn.classList.add('rainbow-hover');
      btn.onmouseleave = ()=> btn.classList.remove('rainbow-hover');
      btn.onclick=()=>showStep(opt.next);
      optionsDiv.appendChild(btn);
    });

  },400);
}

// Inicia o quiz
showStep("start");
</script>

</body>
</html>
